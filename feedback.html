<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Мой сайт</title>
<link href="css/bootstrap-4.0.0.css" rel="stylesheet" type="text/css">
<link href="css/custom.css" rel="stylesheet" type="text/css">
    <style>
        label
        {
            text-align: left !important;
        }
    </style>
    <script>
        function verifyInputs() {
            $('.is-invalid').removeClass('is-invalid');
            const name = $('#user_name');
            let failed = false;
            if (name.val().length === 0)
            {
                name.addClass('is-invalid');
                failed = true;
            }
            const email = $('#user_email');
            if (email.val().length === 0)
            {
                email.addClass('is-invalid');
                failed = true;
            }
            if (failed)
                return false;
            else {
                onSuccess();
                return false;
            }
        }
        function onSuccess() {
            $('form').remove();
            const div = $('#response');

            div.text('Ваше предложение отправлено. Вы можете перейти на главную страницу по этой ');//.text();
            div.append('<a href="index.html">ссылке</a>');
        }
    </script>
</head>

<body class="text-center">
	<div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
      <header class="masthead mb-auto">
        <div class="inner">
          <!--h3 class="masthead-brand"></h3>--->
          <nav class="nav nav-masthead justify-content-center">
            <a class="nav-link" href="index.html">Домашняя страница</a>
            <a class="nav-link" href="works.html">Работы</a>
            <a class="nav-link active" href="feedback.html">Обратная связь</a>
          </nav>
        </div>
      </header>

      <main role="main" class="inner cover mt-3">
        <h1 class="cover-heading">Форма обратной связи</h1>
          <div class="col-md-12 text-left" id="response"></div>
        <form>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="user_name">Ваше имя: </label>
                    <input type="text" class="form-control" id="user_name" placeholder="Введите имя">
                    <div class="invalid-feedback" id="name-invalid">
                        Необходимо ввести имя!
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label for="user_email">Ваша электронная почта: </label>
                    <input type="text" class="form-control" id="user_email" placeholder="Введите почту">
                    <div class="invalid-feedback" id="email-invalid">
                        Необходимо указать почту!
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-12">
                    <label for="user_wishes">Ваши пожелания: </label>
                    <textarea class="form-control" id="user_wishes" rows="4" placeholder="Не жалейте слов...">
                    </textarea>
                </div>
            </div>
            <div class="form-row justify-content-end">
                <div class="col-md-4">
                    <button class="btn btn-block " type="button" onclick="verifyInputs()">
                        Отправить
                    </button>
                </div>
            </div>
        </form>
          <div class="mt-5 mb-3" style="cursor: pointer">
              <img src="images/banner1.gif" height="100" width="157" onclick="location.href = 'https://'+location.host;">
          </div>

      </main>

        <footer class="mastfoot mt-auto">
            <div class="inner">
                <p>Сайт сделал: <a href="https://vk.com/nikita1402">Медведев Никита</a>, студент группы ИКБО-01-15.</p>
                <p><a href="sitemap.html">Карта сайта</a></p>
            </div>
        </footer>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="http://bootstrap-4.ru/docs/4.1/assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="http://bootstrap-4.ru/docs/4.1/assets/js/vendor/popper.min.js"></script>
    <script src="http://bootstrap-4.ru/docs/4.1/dist/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        function sendAjax() {
            $.ajax({
                url: '/lab6/session.php',
                type: 'POST',
                success: function (data) {
                    console.log(data);
                    fillFields(data)
                }
            });
        }
        function fillFields(data) {
            if (typeof data.login === 'undefined')
                return;
            $('#user_name').val(data.name).attr("readonly","");
            $('#user_email').val(data.email).attr("readonly","");
        }
        sendAjax();
    </script>
</body>
</html>
